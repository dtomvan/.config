#!/bin/bash

set -euxo pipefail
filename="$HOME/screenshots/screenshot.$(date +%Y%m%d_%H%M%S).png"

if [[ $XDG_SESSION_TYPE == wayland ]]; then
    grim -g "$(slurp)" "$filename" && exit 0 || exit 1
fi

selection=$(slop || hacksaw)  # add hacksaw arguments inside as you wish
mkdir -p ~/screenshots
shotgun -g "$selection" "$filename"
xclip -t 'image/png' -selection clipboard < "$filename"
